(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{59:function(e,t,r){},60:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(52),c=r.n(s),i=r(58),o=r.n(i),u=r(54),l=r.n(u),f=r(55),d=r.n(f),m=r(53),b=r.n(m),v=r(56),p=r.n(v);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e){var t=e.data,r=e.sort;return null==t?void 0:t.sort((function(e,t){var a=l()(e,1)[0],n=l()(t,1)[0];return("ASC"===r?p.a.sub(a,n):p.a.sub(n,a)).toNumber()})).reduce((function(e,t,r){var a=l()(t,3),n=a[0],s=a[1],c=a[2],i=void 0===c?null:c,u=0===r?s:p.a.add(e[r-1].total||0,s).toString();return[].concat(o()(e),[{price:n,size:s,total:u,sizeColHighlight:i}])}),[]).filter((function(e,t){return t<8}))},j=function(e,t){var r=t.map((function(e){return l()(e,1)[0]})),a=e.reduce((function(e,t){var r=l()(t,2),a=r[0],n=r[1];return g(g({},e),{},c()({},a,{price:a,size:n}))}),{}),n=t.map((function(e){var t,r=l()(e,2),n=r[0],s=r[1];return a[n]&&(null===(t=a[n])||void 0===t?void 0:t.size)!==s?[n,s,a[n].size<s?"increase":"decrease"]:[n,s]}));return[].concat(o()(e.filter((function(e){var t=l()(e,1)[0];return!r.includes(t)}))),o()(n)).filter((function(e){var t=l()(e,2);t[0];return t[1]>0}))},E=function(){var e=Object(a.useState)([]),t=l()(e,2),r=t[0],n=t[1],s=Object(a.useState)([]),c=l()(s,2),i=c[0],o=c[1],u=d()("wss://ws.btse.com/ws/oss/futures"),f=u.sendMessage,m=u.lastJsonMessage;Object(a.useEffect)((function(){return f(JSON.stringify({op:"subscribe",args:["update:BTCPFC_0"]})),function(){f(JSON.stringify({op:"subscribe",args:["update:BTCPFC_0"]}))}}),[]),Object(a.useEffect)((function(){if(m){var e=m.data,t=(e=void 0===e?{type:"",asks:[],bids:[],seqNum:0,prevSeqNum:0}:e).type,r=e.asks,a=e.bids,s=e.seqNum,c=e.prevSeqNum;"snapshot"===t?(n(r),o(a)):"delta"===t&&(s!==c+1?(f(JSON.stringify({op:"unsubscribe",args:["update:BTCPFC_0"]})),f(JSON.stringify({op:"subscribe",args:["update:BTCPFC_0"]}))):(n((function(e){return j(e,r)})),o((function(e){return j(e,a)}))))}}),[m,f]);var b=Object(a.useMemo)((function(){return N({data:r,sort:"ASC"}).reverse()}),[r]),v=Object(a.useMemo)((function(){return N({data:i,sort:"DESC"})}),[i]),O=Object(a.useMemo)((function(){var e,t;return p.a.max((null===(e=b[0])||void 0===e?void 0:e.total)||0,(null===(t=v[7])||void 0===t?void 0:t.total)||0).toString()}),[b,v]);return{asksQuoteList:b,bidsQuoteList:v,totalQuoteSize:O}},S=r(57),w=function(e){var t=e.rowData,r=e.classNames,s=e.totalQuoteSize,i=t.price,o=t.size,u=t.total,l=t.sizeColHighlight,f=Object(a.useMemo)((function(){return b()(p.a.div(u,s).toNumber()).format("0%")}),[s,u]);return n.a.createElement("div",{className:Object(S.a)("row",c()({},r,!!r))},n.a.createElement("div",{className:"cell price"},b()(i).format("0,0.0")),n.a.createElement("div",{className:Object(S.a)("cell size",c()({},l,!!l))},b()(o).format("0,0")),n.a.createElement("div",{className:"cell total"},n.a.createElement("div",{className:"bar",style:{width:f}}),b()(u).format("0,0")))},y=function(){var e=Object(a.useState)(0),t=l()(e,2),r=t[0],n=t[1],s=Object(a.useState)(null),c=l()(s,2),i=c[0],o=c[1],u=Object(a.useRef)(0),f=d()("wss://ws.btse.com/ws/futures"),m=f.sendMessage,b=f.lastJsonMessage;return Object(a.useEffect)((function(){m(JSON.stringify({op:"subscribe",args:["tradeHistoryApi:BTCPFC"]}))}),[]),Object(a.useEffect)((function(){var e;if(b&&!(!(null==b||null===(e=b.data)||void 0===e?void 0:e.length)>0)){var t=b.data[0].price,r=t>u.current?"increase":t<u.current?"decrease":"";o(r),n(t),u.current=t}}),[b]),{lastPrice:r,lastPriceHighlight:i}},h=function(){var e=y(),t=e.lastPrice,r=e.lastPriceHighlight;return n.a.createElement("div",{className:Object(S.a)("last-price",c()({},r,!!r))},n.a.createElement("span",null,b()(t).format("0,0.0")),n.a.createElement("div",{className:"arrow-icon"}))},P=function(){var e=E(),t=e.asksQuoteList,r=e.bidsQuoteList,a=e.totalQuoteSize;return n.a.createElement("div",{className:"order-book"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"title"},"Order Book")),n.a.createElement("div",{className:"quote-table"},n.a.createElement("div",{className:"col-header"},n.a.createElement("div",{className:"cell price"},"Price (USD)"),n.a.createElement("div",{className:"cell size"},"Size"),n.a.createElement("div",{className:"cell total"},"Total")),n.a.createElement("div",{className:"quote-list"},t.map((function(e){return n.a.createElement(w,{key:"".concat(e.price),rowData:e,classNames:"ask",totalQuoteSize:a})})),n.a.createElement(h,null),r.map((function(e){return n.a.createElement(w,{key:"".concat(e.price),rowData:e,classNames:"bid",totalQuoteSize:a})})))))};r(59),t.default=P}}]);